<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Emergency Contacts ‚Ä¢ MEDUCO</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="patient-dashboard.html" class="brand">MEDUCO</a>
        <nav class="nav" id="nav">
          <a href="patient-dashboard.html">‚Üê Back to Dashboard</a>
          <a href="login.html">Logout</a>
        </nav>
        <button aria-label="Toggle menu" class="nav-toggle" id="navToggle">
          <span></span><span></span><span></span>
        </button>
      </div>
    </header>

    <main>
      <section class="section">
        <div class="container" style="max-width: 800px">
          <h1>Emergency Contacts & Information</h1>
          <p class="muted">Manage your emergency contacts and critical medical information.</p>

          <!-- Emergency Alert -->
          <div class="card" style="margin-bottom: 24px; border-left: 4px solid var(--danger); background: #fef2f2;">
            <div class="row">
              <div style="flex: 1;">
                <h3 style="margin: 0; color: var(--danger);">üö® Emergency Situation?</h3>
                <p style="margin: 8px 0 0; color: var(--danger);">If this is a medical emergency, call 911 immediately or go to your nearest emergency room.</p>
              </div>
              <button class="btn" style="background: var(--danger); color: white;" onclick="callEmergency()">Call 911</button>
            </div>
          </div>

          <!-- Quick Emergency Info -->
          <div class="card" style="margin-bottom: 24px;">
            <h3 style="margin-top: 0;">Critical Medical Information</h3>
            <div class="grid-2">
              <div class="mini-card">
                <div class="mini-label">Blood Type</div>
                <div class="mini-value" style="color: var(--danger);">O+</div>
              </div>
              <div class="mini-card">
                <div class="mini-label">Allergies</div>
                <div class="mini-value" style="color: var(--warning);">Penicillin, Shellfish</div>
              </div>
              <div class="mini-card">
                <div class="mini-label">Medical Conditions</div>
                <div class="mini-value">Type 2 Diabetes, Hypertension</div>
              </div>
              <div class="mini-card">
                <div class="mini-label">Current Medications</div>
                <div class="mini-value">Metformin, Lisinopril</div>
              </div>
            </div>
            <button class="btn btn-outline" onclick="editMedicalInfo()" style="margin-top: 16px;">Edit Medical Info</button>
          </div>

          <!-- Emergency Contacts -->
          <div class="card" style="margin-bottom: 24px;">
            <div class="row" style="margin-bottom: 16px;">
              <h3 style="margin: 0;">Emergency Contacts</h3>
              <button class="btn btn-primary" onclick="addEmergencyContact()">Add Contact</button>
            </div>
            <div id="emergencyContactsList">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>

          <!-- Healthcare Providers -->
          <div class="card" style="margin-bottom: 24px;">
            <h3 style="margin-top: 0;">Healthcare Providers</h3>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Provider</th>
                    <th>Specialty</th>
                    <th>Phone</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><strong>Dr. Sarah Johnson</strong><br><small>Primary Care Physician</small></td>
                    <td>Internal Medicine</td>
                    <td>(555) 123-4567</td>
                    <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="callProvider('555-123-4567')">Call</button></td>
                  </tr>
                  <tr>
                    <td><strong>Dr. Michael Chen</strong><br><small>Cardiologist</small></td>
                    <td>Cardiology</td>
                    <td>(555) 234-5678</td>
                    <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="callProvider('555-234-5678')">Call</button></td>
                  </tr>
                  <tr>
                    <td><strong>City General Hospital</strong><br><small>Emergency Department</small></td>
                    <td>Emergency Care</td>
                    <td>(555) 911-0000</td>
                    <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="callProvider('555-911-0000')">Call</button></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Medical ID Card -->
          <div class="card">
            <h3 style="margin-top: 0;">Digital Medical ID</h3>
            <div class="medical-id-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 24px; border-radius: 16px; margin-bottom: 16px;">
              <div class="row" style="margin-bottom: 16px;">
                <div>
                  <h4 style="margin: 0; font-size: 18px;">Jane Cooper</h4>
                  <p style="margin: 0; opacity: 0.9;">DOB: March 15, 1985</p>
                </div>
                <div style="text-align: right;">
                  <div style="background: rgba(255,255,255,0.2); padding: 8px 12px; border-radius: 8px; font-family: monospace;">
                    ID: PAT-24-1234
                  </div>
                </div>
              </div>
              <div class="grid-2" style="gap: 16px;">
                <div>
                  <strong>Blood Type:</strong> O+<br>
                  <strong>Allergies:</strong> Penicillin, Shellfish<br>
                  <strong>Conditions:</strong> Type 2 Diabetes, Hypertension
                </div>
                <div>
                  <strong>Emergency Contact:</strong><br>
                  John Cooper (Spouse)<br>
                  (555) 987-6543
                </div>
              </div>
            </div>
            <div class="row">
              <button class="btn btn-outline" onclick="downloadMedicalID()">Download PDF</button>
              <button class="btn btn-outline" onclick="shareMedicalID()">Share</button>
              <button class="btn btn-outline" onclick="printMedicalID()">Print</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Add/Edit Contact Modal -->
    <div id="contactModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close" onclick="closeContactModal()">&times;</span>
        <h2 id="contactModalTitle">Add Emergency Contact</h2>
        <form id="contactForm">
          <div class="form">
            <input class="input" name="name" placeholder="Full Name" required>
            <input class="input" name="relationship" placeholder="Relationship (e.g., Spouse, Parent)" required>
            <input class="input" name="phone" type="tel" placeholder="Phone Number" required>
            <input class="input" name="email" type="email" placeholder="Email Address">
            <select class="input" name="priority">
              <option value="primary">Primary Contact</option>
              <option value="secondary">Secondary Contact</option>
              <option value="other">Other</option>
            </select>
            <textarea class="input" name="notes" rows="2" placeholder="Additional notes (optional)"></textarea>
            <div class="row">
              <button type="submit" class="btn btn-primary">Save Contact</button>
              <button type="button" class="btn btn-outline" onclick="closeContactModal()">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Medical Info Modal -->
    <div id="medicalInfoModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close" onclick="closeMedicalInfoModal()">&times;</span>
        <h2>Edit Medical Information</h2>
        <form id="medicalInfoForm">
          <div class="form">
            <select class="input" name="bloodType">
              <option value="">Select Blood Type</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB-</option>
              <option value="O+" selected>O+</option>
              <option value="O-">O-</option>
            </select>
            <textarea class="input" name="allergies" rows="2" placeholder="Allergies (separate with commas)">Penicillin, Shellfish</textarea>
            <textarea class="input" name="conditions" rows="3" placeholder="Medical conditions">Type 2 Diabetes, Hypertension</textarea>
            <textarea class="input" name="medications" rows="3" placeholder="Current medications">Metformin 500mg twice daily, Lisinopril 10mg once daily</textarea>
            <textarea class="input" name="notes" rows="2" placeholder="Additional medical notes"></textarea>
            <div class="row">
              <button type="submit" class="btn btn-primary">Save Changes</button>
              <button type="button" class="btn btn-outline" onclick="closeMedicalInfoModal()">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <footer class="site-footer">
      <div class="container">
        ¬© <span id="year"></span> MEDUCO
      </div>
    </footer>

    <script src="script.js"></script>
    <script src="emergency-contacts.js"></script>
  </body>
</html>